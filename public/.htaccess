<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On
    


    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]
    


    # Send Requests To Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]

</IfModule>
<ifModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
</ifModule>

<IfModule mod_expirs.c>
	ExpiresActive On
	
	#A0 = Access + 0 seconds
	ExpiresDefault A0
	
	# 1 YEAR - doesn't change often
	<FilesMatch ".(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv |wav) $">
		ExpiresDefault A29030400
		Header set Cache—Control "max—age=29030400, public"
	</FilesMatch>

	# 1 WEEK - possible to be changed, unlikely
	<FilesMatch ".(jpg|jpeg|png|gif |swf)$">
		ExpiresDefault A604800
		Header set Cache-Control "max—age=604800, public"
	</FilesMatch>

	# 3 HOUR - core content, changes quickly
	<FilesMatch ". (txt|xml|js|css)$">
		ExpiresDefault 10800
		Header set Cache-Control "max—age=10800, public"
	</FilesMatch>
</IfModule>	
